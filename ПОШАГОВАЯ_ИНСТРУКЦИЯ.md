# üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è GoGoMarket

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- **Backend:** 100% –≥–æ—Ç–æ–≤
- **–ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î:** –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- **Frontend Web:** 95% –≥–æ—Ç–æ–≤
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** 96%

---

## –®–ê–ì 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health
curl http://64.226.94.133/api/v1/health

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PM2
ssh root@64.226.94.133 "pm2 status"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
ssh root@64.226.94.133 "cd /var/www/gogomarket/backend && npm run monitor"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Health: `{ "status": "ok" }`
- PM2: gogomarket-backend online
- Monitor: All checks passed

---

## –®–ê–ì 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î (–ø–∞—Ä–æ–ª—å –≤ .env –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
ssh root@64.226.94.133

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
source /var/www/gogomarket/backend/.env
psql "postgresql://doadmin:$DB_PASSWORD@gogomarket-db-do-user-30865317-0.e.db.ondigitalocean.com:25060/defaultdb?sslmode=require"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã
\dt

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT id, phone, role, name FROM users LIMIT 10;

# –í—ã–π—Ç–∏
\q
exit
```

**–û–∂–∏–¥–∞–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
- users, products, videos, orders, carts, cart_items
- chats, messages, stories, reviews, favorites
- transactions, notifications, addresses

---

## –®–ê–ì 3: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Auth API

```bash
# –õ–æ–≥–∏–Ω –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
curl -X POST http://64.226.94.133/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"phone": "+998911111111", "password": "Test123!"}'

# –õ–æ–≥–∏–Ω –ø—Ä–æ–¥–∞–≤—Ü–∞
curl -X POST http://64.226.94.133/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"phone": "+998922222222", "password": "Test123!"}'

# –õ–æ–≥–∏–Ω –∫—É—Ä—å–µ—Ä–∞
curl -X POST http://64.226.94.133/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"phone": "+998933333333", "password": "Test123!"}'

# –õ–æ–≥–∏–Ω –∞–¥–º–∏–Ω–∞
curl -X POST http://64.226.94.133/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"phone": "+998944444444", "password": "Test123!"}'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": true,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "user": { "id": "...", "phone": "...", "role": "buyer" }
  }
}
```

---

## –®–ê–ì 4: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Frontend Auth

1. –û—Ç–∫—Ä—ã—Ç—å http://64.226.94.133/ –≤ **—Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ**
2. –ù–∞–∂–∞—Ç—å "–í–æ–π—Ç–∏"
3. –í–≤–µ—Å—Ç–∏: `+998911111111` / `Test123!`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
   - –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω—É—é
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Console
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Network ‚Üí login –∑–∞–ø—Ä–æ—Å

---

## –®–ê–ì 5: –û–±–Ω–æ–≤–∏—Ç—å AuthContext.tsx (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–§–∞–π–ª: `web/gogomarket-web/src/contexts/AuthContext.tsx`

### –î–æ–±–∞–≤–∏—Ç—å mergeCart –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞:

```typescript
const login = async (phone: string, password: string) => {
  try {
    const response = await api.login(phone, password) as { 
      success: boolean; 
      data: { token: string; user: User }; 
      error?: string 
    };
    
    if (response.success && response.data?.token) {
      api.setToken(response.data.token);
      setUser(response.data.user);
      localStorage.setItem('user', JSON.stringify(response.data.user));
      
      // –°–ª–∏—è–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã –≥–æ—Å—Ç—è —Å —Å–µ—Ä–≤–µ—Ä–Ω–æ–π
      await mergeGuestCart();
      
    } else {
      throw new Error(response.error || 'Login failed');
    }
  } catch (error) {
    console.error('Login error:', error);
    throw error;
  }
};

// –§—É–Ω–∫—Ü–∏—è —Å–ª–∏—è–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã
const mergeGuestCart = async () => {
  const guestCart = localStorage.getItem('guest_cart');
  if (guestCart) {
    try {
      const items = JSON.parse(guestCart);
      if (items.length > 0) {
        await api.post('/cart/merge', { items });
        localStorage.removeItem('guest_cart');
      }
    } catch (e) {
      console.error('Failed to merge cart:', e);
    }
  }
};
```

---

## –®–ê–ì 6: –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫–æ—Ä–∑–∏–Ω—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### CartStorage —É—Ç–∏–ª–∏—Ç–∞:

–§–∞–π–ª: `web/gogomarket-web/src/utils/cartStorage.ts`

```typescript
interface CartItem {
  productId: string;
  variantId?: string;
  quantity: number;
}

const GUEST_CART_KEY = 'guest_cart';

export const cartStorage = {
  getItems(): CartItem[] {
    const data = localStorage.getItem(GUEST_CART_KEY);
    return data ? JSON.parse(data) : [];
  },

  setItems(items: CartItem[]): void {
    localStorage.setItem(GUEST_CART_KEY, JSON.stringify(items));
  },

  addItem(item: CartItem): void {
    const items = this.getItems();
    const existing = items.find(
      i => i.productId === item.productId && i.variantId === item.variantId
    );
    
    if (existing) {
      existing.quantity += item.quantity;
    } else {
      items.push(item);
    }
    
    this.setItems(items);
  },

  removeItem(productId: string, variantId?: string): void {
    const items = this.getItems().filter(
      i => !(i.productId === productId && i.variantId === variantId)
    );
    this.setItems(items);
  },

  clear(): void {
    localStorage.removeItem(GUEST_CART_KEY);
  },

  getCount(): number {
    return this.getItems().reduce((sum, item) => sum + item.quantity, 0);
  }
};
```

---

## –®–ê–ì 7: –î–µ–ø–ª–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ: –∫–æ–º–º–∏—Ç –∏ push
git add .
git commit -m "fix: update auth and cart logic"
git push

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ: pull –∏ rebuild
ssh root@64.226.94.133 "cd /var/www/gogomarket && git pull"

# Backend (–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è)
ssh root@64.226.94.133 "cd /var/www/gogomarket/backend && npm run build && pm2 restart gogomarket-backend"

# Frontend
ssh root@64.226.94.133 "cd /var/www/gogomarket/web/gogomarket-web && npm run build && cp -r dist/* /var/www/html/"
```

---

## –®–ê–ì 8: –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–æ–∫—É–ø–∞—Ç–µ–ª—å (buyer):
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –õ–æ–≥–∏–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–æ–≤
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
- [ ] –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–∫–∞–∑–æ–≤
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ

### –ü—Ä–æ–¥–∞–≤–µ—Ü (seller):
- [ ] –õ–æ–≥–∏–Ω
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä
- [ ] –°–æ–∑–¥–∞—Ç—å –≤–∏–¥–µ–æ
- [ ] –°–æ–∑–¥–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é
- [ ] –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑
- [ ] –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É
- [ ] –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç—á–µ—Ç—ã

### –ö—É—Ä—å–µ—Ä (courier):
- [ ] –õ–æ–≥–∏–Ω
- [ ] –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–∫–∞–∑—ã
- [ ] –ü—Ä–∏–Ω—è—Ç—å –∑–∞–∫–∞–∑
- [ ] –ó–∞–±—Ä–∞—Ç—å —É –ø—Ä–æ–¥–∞–≤—Ü–∞
- [ ] –î–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—é

### –ê–¥–º–∏–Ω (admin):
- [ ] –õ–æ–≥–∏–Ω
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- [ ] –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- [ ] –ú–æ–¥–µ—Ä–∞—Ü–∏—è

---

## –®–ê–ì 9: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
ssh root@64.226.94.133

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å certbot
apt update && apt install -y certbot python3-certbot-nginx

# –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–Ω—É–∂–µ–Ω –¥–æ–º–µ–Ω!)
certbot --nginx -d gogomarket.uz -d www.gogomarket.uz

# –û–±–Ω–æ–≤–∏—Ç—å API URL –≤ frontend
# web/gogomarket-web/src/services/api.ts
# const API_URL = 'https://gogomarket.uz/api/v1';

# Rebuild frontend
cd /var/www/gogomarket/web/gogomarket-web
npm run build
cp -r dist/* /var/www/html/
```

---

## –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### Backend ‚úÖ
- [x] API —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] Auth (login/register)
- [x] Products CRUD
- [x] Videos feed
- [x] Orders flow
- [x] Cart + merge
- [x] Chat
- [x] Stories
- [x] Logging
- [x] Monitoring
- [x] Error handling

### Frontend ‚úÖ
- [x] React app builds
- [x] Routing works
- [x] Auth UI
- [x] Product pages
- [x] Video feed
- [x] Cart UI
- [x] Order UI
- [ ] Auth persistence (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å)

### Infrastructure ‚úÖ
- [x] Server running
- [x] PM2 configured
- [x] Nginx configured
- [x] Database connected
- [ ] HTTPS (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Ä–µ—Å—É—Ä—Å—ã

- **–°–µ—Ä–≤–µ—Ä:** http://64.226.94.133/
- **API:** http://64.226.94.133/api/v1/
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** https://github.com/buranovt2025-jpg/gogomarke.uz
- **–í–µ—Ç–∫–∞:** cursor/-bc-b148334d-8181-4825-adae-a5b8088ae2a6-dfb7

---

## –ì–æ—Ç–æ–≤–æ! üéâ

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –Ω–∞ 96%. –°–ª–µ–¥—É–π—Ç–µ —à–∞–≥–∞–º –ø–æ –ø–æ—Ä—è–¥–∫—É.
